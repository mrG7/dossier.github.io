<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. dossier.label — store ground truth data as labels &mdash; dossier 0.3.4 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="dossier 0.3.4 documentation" href="index.html" />
    <link rel="next" title="4. dossier.models — Active learning" href="dossier.models.html" />
    <link rel="prev" title="2. dossier.store — store feature collections" href="dossier.store.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dossier.models.html" title="4. dossier.models — Active learning"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="dossier.store.html" title="2. dossier.store — store feature collections"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">dossier 0.3.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-dossier.label">
<span id="dossier-label-store-ground-truth-data-as-labels"></span><h1>3. <a class="reference internal" href="#module-dossier.label" title="dossier.label"><code class="xref py py-mod docutils literal"><span class="pre">dossier.label</span></code></a> &#8212; store ground truth data as labels<a class="headerlink" href="#module-dossier.label" title="Permalink to this headline">¶</a></h1>
<p>A simple storage interface for labels (ground truth data).</p>
<p><a class="reference internal" href="#module-dossier.label" title="dossier.label"><code class="xref py py-mod docutils literal"><span class="pre">dossier.label</span></code></a> provides a convenient interface to a
<code class="xref py py-mod docutils literal"><span class="pre">kvlayer</span></code> table for storing ground truth data, otherwise known as
&#8220;labels.&#8221; Each label, at the highest level, maps two things (addressed
by content identifiers) to a coreferent value. This coreferent value is
an indication by a human that these two things are &#8220;the same&#8221;, &#8220;not the
same&#8221; or &#8220;I don&#8217;t know if they are the same.&#8221; <em>Sameness</em> in this case
is determined by the human doing the annotation.</p>
<p>Each label also contains an <code class="docutils literal"><span class="pre">annotator_id</span></code>, which identifies the
human that created the label. A timestamp (in milliseconds since the
Unix epoch) is also included on every label.</p>
<div class="section" id="example">
<h2>3.1. Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>Using a storage backend in your code requires a working <code class="docutils literal"><span class="pre">kvlayer</span></code>
configuration, which is usually written in a YAML file like so:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">kvlayer</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">app_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">store</span>
  <span class="l-Scalar-Plain">namespace</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">dossier</span>
  <span class="l-Scalar-Plain">storage_type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">redis</span>
  <span class="l-Scalar-Plain">storage_addresses</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&quot;redis.example.com:6379&quot;</span><span class="p-Indicator">]</span>
</pre></div>
</div>
<p>And here&#8217;s a full working example that uses local memory to store
labels:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">dossier.label</span> <span class="kn">import</span> <span class="n">Label</span><span class="p">,</span> <span class="n">LabelStore</span><span class="p">,</span> <span class="n">CorefValue</span>
<span class="kn">import</span> <span class="nn">kvlayer</span>
<span class="kn">import</span> <span class="nn">yakonfig</span>

<span class="n">yaml</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">kvlayer:</span>
<span class="s">  app_name: store</span>
<span class="s">  namespace: dossier</span>
<span class="s">  storage_type: local</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="k">with</span> <span class="n">yakonfig</span><span class="o">.</span><span class="n">defaulted_config</span><span class="p">([</span><span class="n">kvlayer</span><span class="p">],</span> <span class="n">yaml</span><span class="o">=</span><span class="n">yaml</span><span class="p">):</span>
    <span class="n">label_store</span> <span class="o">=</span> <span class="n">LabelStore</span><span class="p">(</span><span class="n">kvlayer</span><span class="o">.</span><span class="n">client</span><span class="p">())</span>

    <span class="n">lab</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;annotator&#39;</span><span class="p">,</span> <span class="n">CorefValue</span><span class="o">.</span><span class="n">Positive</span><span class="p">)</span>
    <span class="n">label_store</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">lab</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">lab</span> <span class="o">==</span> <span class="n">label_store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;annotator&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>See the documentation for <code class="xref py py-mod docutils literal"><span class="pre">yakonfig</span></code> for more details on the
configuration setup.</p>
<dl class="class">
<dt id="dossier.label.LabelStore">
<em class="property">class </em><code class="descclassname">dossier.label.</code><code class="descname">LabelStore</code><span class="sig-paren">(</span><em>kvlclient</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#LabelStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.LabelStore" title="Permalink to this definition">¶</a></dt>
<dd><p>A label database.</p>
<dl class="method">
<dt id="dossier.label.LabelStore.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>kvlclient</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#LabelStore.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.LabelStore.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new label store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kvlclient</strong> (<code class="xref py py-class docutils literal"><span class="pre">kvlayer._abstract_storage.AbstractStorage</span></code>) &#8211; kvlayer client</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#dossier.label.LabelStore" title="dossier.label.LabelStore"><code class="xref py py-class docutils literal"><span class="pre">LabelStore</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dossier.label.LabelStore.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>*labels</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#LabelStore.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.LabelStore.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new label to the store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>label</strong> (<a class="reference internal" href="#dossier.label.Label" title="dossier.label.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a>) &#8211; label</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dossier.label.LabelStore.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>cid1</em>, <em>cid2</em>, <em>annotator_id</em>, <em>subid1=''</em>, <em>subid2=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#LabelStore.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.LabelStore.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a label from the store.</p>
<p>When <code class="docutils literal"><span class="pre">subid1</span></code> and <code class="docutils literal"><span class="pre">subid2</span></code> are empty, then a label without
subtopic identifiers will be returned.</p>
<p>If there are multiple labels stored with the same parts,
the single most recent one will be returned.  If there are
no labels with these parts, <a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.KeyError" title="(in Python v2.7)"><code class="xref py py-exc docutils literal"><span class="pre">exceptions.KeyError</span></code></a> will
be raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cid1</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; content id</li>
<li><strong>cid2</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; content id</li>
<li><strong>annotator_id</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; annotator id</li>
<li><strong>subid1</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; subtopic id</li>
<li><strong>subid2</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; subtopic id</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference internal" href="#dossier.label.Label" title="dossier.label.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">KeyError</span></code> if no label could be found.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dossier.label.LabelStore.directly_connected">
<code class="descname">directly_connected</code><span class="sig-paren">(</span><em>ident</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#LabelStore.directly_connected"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.LabelStore.directly_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator of labels connected to <code class="docutils literal"><span class="pre">ident</span></code>.</p>
<p><code class="docutils literal"><span class="pre">ident</span></code> may be a <code class="docutils literal"><span class="pre">content_id</span></code> or a <code class="docutils literal"><span class="pre">(content_id,</span>
<span class="pre">subtopic_id)</span></code>.</p>
<p>If no labels are defined for <code class="docutils literal"><span class="pre">ident</span></code>, then the generator
will yield no labels.</p>
<p>Note that this only returns <em>directly</em> connected labels. It
will not follow transitive relationships.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ident</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">(str,</span> <span class="pre">str)</span></code>) &#8211; content id or (content id and subtopic id)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">generator of <a class="reference internal" href="#dossier.label.Label" title="dossier.label.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dossier.label.LabelStore.connected_component">
<code class="descname">connected_component</code><span class="sig-paren">(</span><em>ident</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#LabelStore.connected_component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.LabelStore.connected_component" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a connected component generator for <code class="docutils literal"><span class="pre">ident</span></code>.</p>
<p><code class="docutils literal"><span class="pre">ident</span></code> may be a <code class="docutils literal"><span class="pre">content_id</span></code> or a <code class="docutils literal"><span class="pre">(content_id,</span>
<span class="pre">subtopic_id)</span></code>.</p>
<p>Given an <code class="docutils literal"><span class="pre">ident</span></code>, return the corresponding connected
component by following all positive transitivity relationships.</p>
<p>For example, if <code class="docutils literal"><span class="pre">(a,</span> <span class="pre">b,</span> <span class="pre">1)</span></code> is a label and <code class="docutils literal"><span class="pre">(b,</span> <span class="pre">c,</span> <span class="pre">1)</span></code> is
a label, then <code class="docutils literal"><span class="pre">connected_component('a')</span></code> will return both
labels even though <code class="docutils literal"><span class="pre">a</span></code> and <code class="docutils literal"><span class="pre">c</span></code> are not directly connected.</p>
<p>(Note that even though this returns a generator, it will still
consume memory proportional to the number of labels in the
connected component.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ident</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">(str,</span> <span class="pre">str)</span></code>) &#8211; content id or (content id and subtopic id)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">generator of <a class="reference internal" href="#dossier.label.Label" title="dossier.label.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dossier.label.LabelStore.expand">
<code class="descname">expand</code><span class="sig-paren">(</span><em>ident</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#LabelStore.expand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.LabelStore.expand" title="Permalink to this definition">¶</a></dt>
<dd><p>Return expanded set of labels from a connected component.</p>
<p>The connected component is derived from <code class="docutils literal"><span class="pre">ident</span></code>. <code class="docutils literal"><span class="pre">ident</span></code>
may be a <code class="docutils literal"><span class="pre">content_id</span></code> or a <code class="docutils literal"><span class="pre">(content_id,</span> <span class="pre">subtopic_id)</span></code>.
If <code class="docutils literal"><span class="pre">ident</span></code> identifies a subtopic, then expansion is done
on a subtopic connected component (and expanded labels retain
subtopic information).</p>
<p>The labels returned by <a class="reference internal" href="#dossier.label.LabelStore.connected_component" title="dossier.label.LabelStore.connected_component"><code class="xref py py-meth docutils literal"><span class="pre">LabelStore.connected_component()</span></code></a>
contains only the <a class="reference internal" href="#dossier.label.Label" title="dossier.label.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a> stored in the
<a class="reference internal" href="#dossier.label.LabelStore" title="dossier.label.LabelStore"><code class="xref py py-class docutils literal"><span class="pre">LabelStore</span></code></a>, and does not include the labels you can
infer from the connected component. This method returns both
the data-backed labels and the inferred labels.</p>
<p>Subtopic assignments of the expanded labels will be empty. The
<code class="docutils literal"><span class="pre">annotator_id</span></code> will be an arbitrary <code class="docutils literal"><span class="pre">annotator_id</span></code> within
the connected component.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>content_id</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; content id</li>
<li><strong>value</strong> (<a class="reference internal" href="#dossier.label.CorefValue" title="dossier.label.CorefValue"><code class="xref py py-class docutils literal"><span class="pre">CorefValue</span></code></a>) &#8211; coreferent value</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">list</span></code> of <a class="reference internal" href="#dossier.label.Label" title="dossier.label.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dossier.label.LabelStore.everything">
<code class="descname">everything</code><span class="sig-paren">(</span><em>include_deleted=False</em>, <em>content_id=None</em>, <em>subtopic_id=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#LabelStore.everything"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.LabelStore.everything" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of all labels in the store.</p>
<p>If <cite>include_deleted</cite> is <code class="xref py py-const docutils literal"><span class="pre">True</span></code>, labels that have been
overwritten with more recent labels are also included.  If
<cite>content_id</cite> is not <code class="xref py py-const docutils literal"><span class="pre">None</span></code>, only labels for that
content ID are retrieved; and then if <cite>subtopic_id</cite> is not
<code class="xref py py-const docutils literal"><span class="pre">None</span></code>, only that subtopic is retrieved, else all
subtopics are retrieved.  The returned labels will always be
in sorted order, content IDs first, and with those with the
same content, subtopic, and annotator IDs sorted newest first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">generator of <a class="reference internal" href="#dossier.label.Label" title="dossier.label.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dossier.label.LabelStore.delete_all">
<code class="descname">delete_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#LabelStore.delete_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.LabelStore.delete_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all labels in the store.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="dossier.label.Label">
<em class="property">class </em><code class="descclassname">dossier.label.</code><code class="descname">Label</code><span class="sig-paren">(</span><em>content_id1</em>, <em>content_id2</em>, <em>annotator_id</em>, <em>value</em>, <em>subtopic_id1=None</em>, <em>subtopic_id2=None</em>, <em>epoch_ticks=None</em>, <em>rating=None</em>, <em>meta=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#Label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.Label" title="Permalink to this definition">¶</a></dt>
<dd><p>An immutable unit of ground truth data.</p>
<p>This is a statement that the item at <a class="reference internal" href="#dossier.label.Label.content_id1" title="dossier.label.Label.content_id1"><code class="xref py py-attr docutils literal"><span class="pre">content_id1</span></code></a>,
<a class="reference internal" href="#dossier.label.Label.subtopic_id1" title="dossier.label.Label.subtopic_id1"><code class="xref py py-attr docutils literal"><span class="pre">subtopic_id1</span></code></a> refers to (or doesn&#8217;t) the same thing as the
item at <a class="reference internal" href="#dossier.label.Label.content_id2" title="dossier.label.Label.content_id2"><code class="xref py py-attr docutils literal"><span class="pre">content_id2</span></code></a>, <a class="reference internal" href="#dossier.label.Label.subtopic_id2" title="dossier.label.Label.subtopic_id2"><code class="xref py py-attr docutils literal"><span class="pre">subtopic_id2</span></code></a>.  This assertion
was recorded by <a class="reference internal" href="#dossier.label.Label.annotator_id" title="dossier.label.Label.annotator_id"><code class="xref py py-attr docutils literal"><span class="pre">annotator_id</span></code></a>, a string identifying a user,
at <a class="reference internal" href="#dossier.label.Label.epoch_ticks" title="dossier.label.Label.epoch_ticks"><code class="xref py py-attr docutils literal"><span class="pre">epoch_ticks</span></code></a>, with <a class="reference internal" href="#dossier.label.CorefValue" title="dossier.label.CorefValue"><code class="xref py py-class docutils literal"><span class="pre">CorefValue</span></code></a> <a class="reference internal" href="#dossier.label.Label.value" title="dossier.label.Label.value"><code class="xref py py-attr docutils literal"><span class="pre">value</span></code></a>.</p>
<p>On creation, the tuple is normalized such that the pair of
<cite>content_id1</cite> and <cite>subtopic_id1</cite> are less than the pair of
<cite>content_id2</cite> and <cite>subtopic_id2</cite>.</p>
<p>Labels are comparable, sortable, and hashable.  The sort order
compares the two content IDs, the two subtopic IDs,
<a class="reference internal" href="#dossier.label.Label.annotator_id" title="dossier.label.Label.annotator_id"><code class="xref py py-attr docutils literal"><span class="pre">annotator_id</span></code></a>, <a class="reference internal" href="#dossier.label.Label.epoch_ticks" title="dossier.label.Label.epoch_ticks"><code class="xref py py-attr docutils literal"><span class="pre">epoch_ticks</span></code></a> (most recent is
smallest), and then other fields.</p>
<dl class="attribute">
<dt id="dossier.label.Label.content_id1">
<code class="descname">content_id1</code><a class="headerlink" href="#dossier.label.Label.content_id1" title="Permalink to this definition">¶</a></dt>
<dd><p>The first content ID.</p>
</dd></dl>

<dl class="attribute">
<dt id="dossier.label.Label.content_id2">
<code class="descname">content_id2</code><a class="headerlink" href="#dossier.label.Label.content_id2" title="Permalink to this definition">¶</a></dt>
<dd><p>The second content ID.</p>
</dd></dl>

<dl class="attribute">
<dt id="dossier.label.Label.annotator_id">
<code class="descname">annotator_id</code><a class="headerlink" href="#dossier.label.Label.annotator_id" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier of the user making this assertion.</p>
</dd></dl>

<dl class="attribute">
<dt id="dossier.label.Label.value">
<code class="descname">value</code><a class="headerlink" href="#dossier.label.Label.value" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#dossier.label.CorefValue" title="dossier.label.CorefValue"><code class="xref py py-class docutils literal"><span class="pre">CorefValue</span></code></a> stating whether this is a positive or
negative coreference assertion.</p>
</dd></dl>

<dl class="attribute">
<dt id="dossier.label.Label.subtopic_id1">
<code class="descname">subtopic_id1</code><a class="headerlink" href="#dossier.label.Label.subtopic_id1" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier defining a section or region of
<a class="reference internal" href="#dossier.label.Label.content_id1" title="dossier.label.Label.content_id1"><code class="xref py py-attr docutils literal"><span class="pre">content_id1</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="dossier.label.Label.subtopic_id2">
<code class="descname">subtopic_id2</code><a class="headerlink" href="#dossier.label.Label.subtopic_id2" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier defining a section or region of
<a class="reference internal" href="#dossier.label.Label.content_id2" title="dossier.label.Label.content_id2"><code class="xref py py-attr docutils literal"><span class="pre">content_id2</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="dossier.label.Label.epoch_ticks">
<code class="descname">epoch_ticks</code><a class="headerlink" href="#dossier.label.Label.epoch_ticks" title="Permalink to this definition">¶</a></dt>
<dd><p>The time at which <a class="reference internal" href="#dossier.label.Label.annotator_id" title="dossier.label.Label.annotator_id"><code class="xref py py-attr docutils literal"><span class="pre">annotator_id</span></code></a> made this assertion,
in seconds since the Unix epoch.</p>
</dd></dl>

<dl class="attribute">
<dt id="dossier.label.Label.rating">
<code class="descname">rating</code><a class="headerlink" href="#dossier.label.Label.rating" title="Permalink to this definition">¶</a></dt>
<dd><p>An additional score showing the relative importance of this
label, mirroring <code class="xref py py-class docutils literal"><span class="pre">streamcorpus.Rating</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="dossier.label.Label.meta">
<code class="descname">meta</code><a class="headerlink" href="#dossier.label.Label.meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Any additional meta data about this label, structured as
a dictionary.</p>
</dd></dl>

<dl class="method">
<dt id="dossier.label.Label.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>content_id1</em>, <em>content_id2</em>, <em>annotator_id</em>, <em>value</em>, <em>subtopic_id1=None</em>, <em>subtopic_id2=None</em>, <em>epoch_ticks=None</em>, <em>rating=None</em>, <em>meta=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#Label.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.Label.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new label.</p>
<p>Parameters are assigned to their corresponding fields, with
some normalization.  If <cite>value</cite> is an <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">int</span></code></a>, the
corresponding <a class="reference internal" href="#dossier.label.CorefValue" title="dossier.label.CorefValue"><code class="xref py py-class docutils literal"><span class="pre">CorefValue</span></code></a> is used instead.  If
<cite>epoch_ticks</cite> is <code class="xref py py-const docutils literal"><span class="pre">None</span></code> then the current time is
used.  If <cite>rating</cite> is <code class="xref py py-const docutils literal"><span class="pre">None</span></code> then it will be 1 if
<cite>value</cite> is <code class="xref py py-attr docutils literal"><span class="pre">CorefValue.Positive</span></code> and 0 otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="dossier.label.Label.__contains__">
<code class="descname">__contains__</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#Label.__contains__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.Label.__contains__" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests membership of identifiers.</p>
<p>If <cite>v</cite> is a tuple of <code class="docutils literal"><span class="pre">(content_id,</span> <span class="pre">subtopic_id)</span></code>, then the
pair is checked for membership. Otherwise, <cite>v</cite> must be a
<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> and is checked for equality to one of the content
ids in this label.</p>
<p>As a special case, if <cite>v</cite> is <code class="docutils literal"><span class="pre">(content_id,</span> <span class="pre">None)</span></code>, then
<cite>v</cite> is treated as if it were <code class="docutils literal"><span class="pre">content_id</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">,</span> <span class="s">&#39;c2&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;c1&#39;</span> <span class="ow">in</span> <span class="n">l</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">l</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">in</span> <span class="n">l</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">,</span> <span class="s">&#39;s1&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">l</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ll</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">,</span> <span class="s">&#39;c2&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;s1&#39;</span><span class="p">,</span> <span class="s">&#39;s2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;c1&#39;</span> <span class="ow">in</span> <span class="n">l</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">in</span> <span class="n">l</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">,</span> <span class="s">&#39;s1&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">l</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="dossier.label.Label.other">
<code class="descname">other</code><span class="sig-paren">(</span><em>content_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#Label.other"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.Label.other" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the other content id.</p>
<p>If <code class="docutils literal"><span class="pre">content_id</span> <span class="pre">==</span> <span class="pre">self.content_id1</span></code>, then return
<code class="docutils literal"><span class="pre">self.content_id2</span></code> (and vice versa).  Raises
<a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.KeyError" title="(in Python v2.7)"><code class="xref py py-exc docutils literal"><span class="pre">exceptions.KeyError</span></code></a> if <cite>content_id</cite> is neither one.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="s">&#39;c1, &#39;</span><span class="n">c2</span><span class="s">&#39;, &#39;</span><span class="n">a</span><span class="s">&#39;, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">other</span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">)</span>
<span class="go">&#39;c2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">other</span><span class="p">(</span><span class="s">&#39;c2&#39;</span><span class="p">)</span>
<span class="go">&#39;c1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">other</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;a&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="dossier.label.Label.subtopic_for">
<code class="descname">subtopic_for</code><span class="sig-paren">(</span><em>content_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#Label.subtopic_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.Label.subtopic_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the subtopic id that corresponds with a content id.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">,</span> <span class="s">&#39;c2&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;s1&#39;</span><span class="p">,</span> <span class="s">&#39;s2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">subtopic_for</span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">)</span>
<span class="go">&#39;s1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">subtopic_for</span><span class="p">(</span><span class="s">&#39;c2&#39;</span><span class="p">)</span>
<span class="go">&#39;s2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">subtopic_for</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;a&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>content_id</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; content ID to look up</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">subtopic ID for <cite>content_id</cite></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.KeyError" title="(in Python v2.7)">exceptions.KeyError</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">if <cite>content_id</cite> is neither
content ID in this label</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dossier.label.Label.same_subject_as">
<code class="descname">same_subject_as</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#Label.same_subject_as"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.Label.same_subject_as" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if two labels are about the same thing.</p>
<p>This predicate returns <code class="xref py py-const docutils literal"><span class="pre">True</span></code> if <cite>self</cite> and <cite>other</cite>
have the same content IDs, subtopic IDs, and annotator ID.
The other fields may have any value.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">,</span> <span class="s">&#39;c2&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">CorefValue</span><span class="o">.</span><span class="n">Positive</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">epoch_ticks</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l2</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="s">&#39;c1&#39;</span><span class="p">,</span> <span class="s">&#39;c2&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">CorefValue</span><span class="o">.</span><span class="n">Negative</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">epoch_ticks</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span><span class="o">.</span><span class="n">same_subject_as</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">==</span> <span class="n">l2</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="dossier.label.Label.most_recent">
<em class="property">static </em><code class="descname">most_recent</code><span class="sig-paren">(</span><em>labels</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dossier/label/label.html#Label.most_recent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.Label.most_recent" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter an iterator to return the most recent for each subject.</p>
<p><cite>labels</cite> is any iterator over <a class="reference internal" href="#dossier.label.Label" title="dossier.label.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a> objects.  It
should be sorted with the most recent first, which is the
natural sort order that <a class="reference external" href="http://docs.python.org/library/functions.html#sorted" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">sorted()</span></code></a> and the
<a class="reference internal" href="#dossier.label.LabelStore" title="dossier.label.LabelStore"><code class="xref py py-class docutils literal"><span class="pre">LabelStore</span></code></a> adapter will return.  The result of this
is a generator of the same labels but with any that are not
the most recent for the same subject (according to
<a class="reference internal" href="#dossier.label.Label.same_subject_as" title="dossier.label.Label.same_subject_as"><code class="xref py py-meth docutils literal"><span class="pre">same_subject_as()</span></code></a>) filtered out.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="dossier.label.CorefValue">
<em class="property">class </em><code class="descclassname">dossier.label.</code><code class="descname">CorefValue</code><a class="reference internal" href="_modules/dossier/label/label.html#CorefValue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dossier.label.CorefValue" title="Permalink to this definition">¶</a></dt>
<dd><p>A human-assigned value for a coreference judgement.</p>
<p>The judgment is always made with respect to a pair of content
items.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><strong>Negative</strong> &#8211; The two items are not coreferent.</li>
<li><strong>Unknown</strong> &#8211; It is unknown whether the two items are coreferent.</li>
<li><strong>Positive</strong> &#8211; The two items are coreferent.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="module-dossier.label.run">
<span id="dossier-label-command-line-tool"></span><h3>3.1.1. <strong class="command">dossier.label</strong> command-line tool<a class="headerlink" href="#module-dossier.label.run" title="Permalink to this headline">¶</a></h3>
<p><strong class="command">dossier.label</strong> command-line tool.</p>
<p><code class="docutils literal"><span class="pre">dossier.label</span></code> is a command line application for viewing the raw label
data inside the database. Generally, this is a debugging tool for developers.</p>
<p>Run <code class="docutils literal"><span class="pre">dossier.label</span> <span class="pre">--help</span></code> for the available commands.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. <code class="docutils literal"><span class="pre">dossier.label</span></code> &#8212; store ground truth data as labels</a><ul>
<li><a class="reference internal" href="#example">3.1. Example</a><ul>
<li><a class="reference internal" href="#module-dossier.label.run">3.1.1. <strong class="command">dossier.label</strong> command-line tool</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="dossier.store.html"
                        title="previous chapter">2. <code class="docutils literal"><span class="pre">dossier.store</span></code> &#8212; store feature collections</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dossier.models.html"
                        title="next chapter">4. <code class="docutils literal"><span class="pre">dossier.models</span></code> &#8212; Active learning</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/dossier.label.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dossier.models.html" title="4. dossier.models — Active learning"
             >next</a> |</li>
        <li class="right" >
          <a href="dossier.store.html" title="2. dossier.store — store feature collections"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">dossier 0.3.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, Diffeo, Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>